<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="shortcut icon" type="image/png" href="https://img.icons8.com/flat_round/24/000000/traffic-light.png">

</head>
<body>

<div style="width: 350px;">
	<canvas id="canvas1" width="350" height="150"></canvas>
	<canvas id="canvas2" width="350" height="150"></canvas>
	<canvas id="canvas3" width="350" height="150"></canvas>
</div>

<script>
	



function drawRed(lightColoured) {

	var canvas = document.getElementById("canvas1");
	var ctx = canvas.getContext("2d");
	ctx.clearRect(0, 0, canvas.width, canvas.height);

	ctx.beginPath();
	ctx.arc(150, 80, 60, 0, Math.PI * 2, false);
	ctx.stroke();

	if (lightColoured)
		ctx.fillStyle ="Red";
	else
		ctx.fillStyle = "LightGrey";

	ctx.fill();
}
		
function drawYellow(lightColoured) {

	var canvas = document.getElementById("canvas2");
	var ctx = canvas.getContext("2d");
	ctx.clearRect(0, 0, canvas.width, canvas.height);

	ctx.beginPath();
	ctx.arc(150, 80, 60, 0, Math.PI * 2, false);
	ctx.stroke();

	if (lightColoured)
		ctx.fillStyle ="Yellow";
	else
		ctx.fillStyle = "LightGrey";

	ctx.fill();
}

function drawGreen(lightColoured) {

	var canvas = document.getElementById("canvas3");
	var ctx = canvas.getContext("2d");
	ctx.clearRect(0, 0, canvas.width, canvas.height);

	ctx.beginPath();
	ctx.arc(150, 80, 60, 0, Math.PI * 2, false);
	ctx.stroke();

	if (lightColoured)
		ctx.fillStyle ="Green";
	else
		ctx.fillStyle = "LightGrey";

	ctx.fill();
}

function setIntervalX(callback, delay, repetitions) {
    var x = 0;
    var intervalID = window.setInterval(function () {

       callback();

       if (++x === repetitions) {
           window.clearInterval(intervalID);
       }
    }, delay);
}

window.onload = startCycle();

function startCycle()
{
	drawRed(true);
	drawYellow(false);
	drawGreen(false);

	setTimeout(drawYellow, 2000, true);
	
	setTimeout(function() {
		drawRed(false);
		drawYellow(false);
		drawGreen(true);
	}, 3500);

	setTimeout(function() {
		var greenEnabled = true;

		setIntervalX(function ()
		{
			greenEnabled = !greenEnabled;
			drawGreen(greenEnabled);
		}, 500, 4);

		setTimeout(function() {
			drawGreen(false);
			drawYellow(true);
			setTimeout(function () {
				startCycle();
			}, 1000);
		}, 2500);
	}, 5500);
}


	

</script>



</body>
</html>